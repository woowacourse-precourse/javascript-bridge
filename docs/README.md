# 미션 - 다리 건너기

## 프로젝트 설계

<img width="850" alt="설계" src="https://user-images.githubusercontent.com/66871265/203291116-ed15b46a-dbdf-4d7f-af0d-1ed42419f5cf.png">

## 기능 목록

### `Model`

1. BridgeGameModel

- [x] initialize
  - 재시작시, 필드를 초기화한다.
- [x] start
  - 게임 시작 후, 다리 데이터를 받아와 필드를 업데이트를 한다
- [x] retry
  - 재시작을 한다면 retry 필드에 유저의 키워드 값을 넣는다.
- [x] update
  - directions 필드에 사용자가 입력한 방향 데이터를 업데이트한다.
  - directions, bridge 필드 데이터를 리턴한다
- [x] result
  - 시도 횟수와 게임 성공 여부, 그리고 bridge와 directions 데이터를 준다.
- [x] read
  - bridge와 directions 데이터를 준다.
- [x] checkBridge
  - 메세지를 통해 유효한 bridge 데이터인지 확인하고 유효하지 않다면 Error를 던진다.
- [x] checkDirection
  - 메세지를 통해 유효한 direction 데이터인지 확인하고 유효하지 않다면 Error를 던진다.
- [x] isSuccess
  - 메세지를 통해 게임 결과를 알려준다.
- [x] isPass
  - 메세지를 통해 다리를 통과했는지 알려준다.
- [x] isRetry
  - 메세지를 통해 게임을 재시작했는지 알려준다.

### `View`

1. OutputView

- [x] printMap
  - 데이터를 받아와 다리를 그려준다.
- [x] printResult
  - 데이터를 받아와 게임 결과를 그려준다
- [x] printStart
  - 게임 시작을 그려준다
- [x] printBlank
  - 공백을 출력해 줄바꿈을 해준다.

1. InputView

- [x] readBridgeSize
  - 사이즈 입력 문구를 그려주고 내부 콜백은 컨트롤러에게 위임한다.
- [x] readMoving
  - 이동할 칸 입력 문구를 그려주고 내부 콜백은 컨트롤러에게 위임한다.
- [x] readGameCommand
  - 재시작/종료 여부 문구를 그려주고 내부 콜백은 컨트롤러에게 위임한다.

### `Controller`

1. BridgeGame

- [x] move
  - 유저가 다리를 이동하는 과정을 컨트롤한다
- [x] retry
  - 유저가 재시작/종료 여부를 컨트롤한다.
- [x] start
  - 유저가 시작할 때를 컨트롤한다.
- [x] end
  - 유저가 종료시 상황을 컨트롤한다.

### `Service`

1. BridgeGameService

- [x] moveGame
  - 컨트롤러의 move 요청에 대한 로직을 담당한다.
  - 모델의 메세지를 사용하여 사용자의 점프 데이터를 검증하고 저장한다.
  - 모델의 메세지를 사용하여 게임의 결과를 확인한다
  - 모델로부터 유저가 움직인 결과 데이터를 받아와 아웃풋뷰에 넘긴다
- [x] startGame
  - 컨트롤러의 start 요청에 대한 로직을 담당한다.
  - 모델의 메세지를 사용하여 다리 데이터를 검증하고 저장한다.
- [x] retryGame
  - 컨트롤러의 retry 요청에 대한 로직을 담당한다.
  - 모델의 메세지를 사용하여 사용자의 재시작 데이터를 검증하고 시도 횟수를 저장한다.
- [x] endGame
  - 컨트롤러의 end 요청에 대한 로직을 담당한다.
  - 아웃풋 뷰의 게임 종료 결과 뷰를 호출한다
  - 게임을 종료한다.
- [x] processMove
  - 성공했다면 게임을 종료하는 로직을 담당한다.
  - 다리를 통과했다면 이후 이어질 로직을 호출한다.
- [x] processRetry
  - 사용자의 재시작 여부에 따라 이어질 로직을 호출한다.

## 예외 처리

1. 다리의 길이
   1. 3 ~ 20까지의 숫자
   2. 음수 값 처리
   3. 숫자가 아닌 경우
2. 이동할 칸의 값
   1. "U", "D"가 아닌 경우
3. 게임의 재시작/종료 여부의 값
   1. "R", "Q"가 아닌 경우
4. 사용자가 잘못된 값을 입력한 경우 throw문을 사용해 예외를 발생시키고, "[ERROR]"로 시작하는 에러 메시지를 출력 후 `그 부분부터 입력을 다시 받는다`.

## 중점 포인트

1. MVC 패턴을 지키자!

- 모델은 컨트롤러와 뷰에 의존하지 않아야 된다

- 모델 내부에 컨트롤러와 뷰에 관련된 코드가 있으면 안 된다.

- 뷰는 모델에만 의존해야 한다.

- 뷰는 모델에만 의존해야 하고, 컨트롤러에는 의존하면 안 된다.

  - 뷰 내부에 모델의 코드만 있을 수 있고, 컨트롤러의 코드가 있으면 안 된다.

- 뷰가 모델로부터 데이터를 받을 때는, 사용자마다 다르게 보여주어야 하는 데이터에 대해서만 받아야 한다.

- 컨트롤러는 모델과 뷰에 의존해도 된다

  - 컨트롤러 내부에는 모델과 뷰의 코드가 있을 수 있다.

- 뷰가 모델로부터 데이터를 받을 때, 반드시 컨트롤러에서 받아야 한다.

## 실행 결과 예시

```shell
다리 건너기 게임을 시작합니다.

다리의 길이를 입력해주세요.
3

이동할 칸을 선택해주세요. (위: U, 아래: D)
U
[ O ]
[   ]

이동할 칸을 선택해주세요. (위: U, 아래: D)
U
[ O | X ]
[   |   ]

게임을 다시 시도할지 여부를 입력해주세요. (재시도: R, 종료: Q)
R
이동할 칸을 선택해주세요. (위: U, 아래: D)
U
[ O ]
[   ]

이동할 칸을 선택해주세요. (위: U, 아래: D)
D
[ O |   ]
[   | O ]

이동할 칸을 선택해주세요. (위: U, 아래: D)
D
[ O |   |   ]
[   | O | O ]

최종 게임 결과
[ O |   |   ]
[   | O | O ]

게임 성공 여부: 성공
총 시도한 횟수: 2
```
