# 미션 - 다리 건너기

## 기능

1. 게임 원리: 위, 아래 둘 중 하나의 칸만 컨널 수 있는 다리를 끝까지 건너가는 게임
2. 규칙
   1. 위, 아래로 이루어진 다리를 건넌다.
      - 다리는 왼쪽 -> 오른쪽
      - 위아래 둘 중 한나의 칸만
   2. 다리 길이는 숫자로 입력받고 생성한다.
      - 건널 수 있는지에 대한 여부는 0, 1 중 랜덤 값으로 정한다.(숫자)
      - 무작위 값이 0인 경우는 아래칸, 1인 경우는 위칸을 건널 수 있다.
      - 아래로 건널 수 있는 경우는 U, 위로 건널 수 있는 경우는 D로 나타낸다.(대문자)
   3. 다리가 생성되면 플레이어가 이동할 칸을 선택하여 입력한다.
      - 아래로 건너고 싶으면 U, 위로 건너고 싶으면 D로 나타낸다.(대문자)
      - 선택한 칸이 이동할 수 있으면 O, 이동할 수 없으면 X로 표시힌다.(대문자)
   4. 다리를 끝까지 건너면 게임 종료이다.
   5. 게임 클리어에 실패하면 재시작하거나 종료할 수 있다.
      - 재시작해도 처음에 만든 다리(다리 길이, 건널 수 있는지에 대한 여부)는 재사용
      - 게임 결과의 총 시도한 횟수는 첫 시도를 포함해 게임을 종료할 때까지 시도한 횟수를 나타낸다.
   6. 사용자가 잘못된 값을 입력한 경우 `throw`문을 사용해 예외를 발생시키고, "[ERROR]"로 시작하는 에러 메시지를 출력 후 그 부분부터 입력을 다시 받는다.

## 입출력 요구 상황

```
다리 건너기 게임을 시작합니다.

다리의 길이를 입력해주세요. -> 다리 길이를 입력 받는다. 3이상 20이하의 숫자를 입력할 수 있으며, 올바른 값이 아니면 예외 처리한다.
3

이동할 칸을 선택해주세요. (위: U, 아래: D) -> 라운드 마다 플레이어가 입력할 칸을 선택한다. U, D 중 하나의 값만 입력 가능, 올바른 값이 아니면 예외 처리한다.
U
[ O ] ->  이동할 수 있는 칸을 선택한 경우 O 표시, 다리의 시작은 `[`, 다리의 끝은 `]`으로 표시
[   ] -> 선택하지 않은 칸은 공백 한 칸으로 표시

이동할 칸을 선택해주세요. (위: U, 아래: D)
U
[ O | X ] -> 이동할 수 없는 칸을 선택한 경우 X 표시, 다리 칸의 구분은 `|`(앞뒤 공백 포함) 문자열로 구분
[   |   ]

게임을 다시 시도할지 여부를 입력해주세요. (재시도: R, 종료: Q) -> R(재시작)과 Q(종료) 중 하나의 문자를 입력할 수 있으며 올바른 값이 아니면 예외 처리한다.
R
이동할 칸을 선택해주세요. (위: U, 아래: D)
U
[ O ]
[   ]

이동할 칸을 선택해주세요. (위: U, 아래: D)
D
[ O |   ]
[   | O ]

이동할 칸을 선택해주세요. (위: U, 아래: D)
D
[ O |   |   ]
[   | O | O ]

최종 게임 결과 -> 현재까지 건넌 다리를 모두 출력
[ O |   |   ]
[   | O | O ]

게임 성공 여부: 성공
총 시도한 횟수: 2
```

```
다리 건너기 게임을 시작합니다.

다리의 길이를 입력해주세요.
3

이동할 칸을 선택해주세요. (위: U, 아래: D)
U
[ O ]
[   ]

이동할 칸을 선택해주세요. (위: U, 아래: D)
U
[ O | X ]
[   |   ]

게임을 다시 시도할지 여부를 입력해주세요. (재시도: R, 종료: Q)
Q
최종 게임 결과
[ O | X ]
[   |   ]

게임 성공 여부: 실패
총 시도한 횟수: 1
```

## 목표

### 3주차 피드백

- 예외를 충분히 고민했는가
- 필드의 수를 줄이는데 노력했는가
- 공백을 포함한 함수 라인이 잘 맞추어졌는가
- 비즈니스 로직과 ui 로직을 한 클래스에서 담당하지는 않았는가
- 테스트 코드를 리팩토링 했는가
- 단위 테스트하기 어려운 코드도 코드 단위 테스트를 통과했는가

### 확인

- node 14에서 정상적으로 작동하는가
- 프로그램의 시작이 `App.js`의 `play` 메세드인가
- 순수 바닐라 js를 이용했는가
- indent depth를 3이 넘지 않았는가 (2까지 허용)
- 함수가 한 가지 일만 하도록 작게 만들었는가
- jest를 이용하여 본인이 정리한 기능목록이 정상 동작함을 테스트 코드로 확인
- else를 지양
- 도메인 로직에 대한 단위 테스트를 구현해야 한다.
- 함수 또는 메소드의 길이가 10라인을 넘지 않도록 구현
- 메서드의 파라미터의 개수가 최대 3개까지 허용
- 클래스 요구 상황을 지키면서 구현했는가

### InputView 객체

- InputView의 파일 경로 변경 가능
- InputView의 메소드 인자 변경 가능
- 사용자 값 입력을 위해 필요한 메세드 추가

### OutputView 객체

- OutputView의 파일 경로 수정 가능
- OutputView의 메서드의 이름은 변경 x
- 인자는 필요에 따라 추가하거나 변경 가능
- 값 출력을 위해 필요한 메서드를 추가 가능

### BridgeGame 클래스

- BridgeGame에 필드(인스턴스 변수)를 추가 가능
  = 파일 경로 수정 가능
- BridgeGame의 메서드의 이름은 변경x
- 인자는 필요에 따라 추가하거나 변경 가능
- 게임 진행을 위해 필요한 메서드를 추가 하거나 변경 가능

### BridgeMaker 객체

- BridgeMaker에 프로퍼티를 추가 가능
- BridgeMaker의 파일 경로는 변경 x
- BridgeMaker의 메서드의 시그니처(인자, 이름)와 반환 타입은 변경 x

### BridgeRandomNumberGenerator 객체

- random 값 추출은 제공된 BridgeRandomNumberGenerator의 generate()를 활
- BridgeRandomNumberGenerator의 코드는 변경 x

## 기능목록

1. 다리 건너기 게임 시작하기

   - [x] 출력: 시작 문구를 출력

2. 다리 길이 입력하는 기능 만들기

   - [x] 출력과 입력: 다리 길이 입력 문구 보여주고 사용자가 다리 길이 입력
   - [x] 입력값 유효성 검사: 3이상 20이하의 숫자이외의 모든 문자열은 예외 대상이다.
   - [x] 예외처리: 올바른 값이 아니라면 아닐시, 유효성 검사에 실패할 시 "[ERROR]"로 시작하는 에러 메서 출력하고 입력을 다시 받는다.

3. 다리를 건널 수 있는지에 대한 기능 만들기

   - [x] 랜덤값 생성: 다리길이만큼 0과 1의 랜덤 숫자를 추출한다.
   - [x] 매치: 랜덤 값과 이동방향을 매치시킨다.

4. 사용자가 선택한 칸이 이동할 칸인지 확인하는 기능 만들기

   - [x] 출력과 입력: 사용자에게 이동할 칸 선택하라는 문구 출력하고 사용자가 이동할 칸 입력
   - [x] 유효성 검사: 아래로 건널 수 있는 경우는 D, 위로 건널 수 있는 경우는 U로 나타낸다.(대문자)
   - [x] 예외처리: 올바른 값이 아니라면 아닐시, 유효성 검사에 "[ERROR]"로 시작하는 실패할 시 에러 메서지 출려하고 입력을 다시 받는다.

5. 사용자가 선택한 칸에 대한 정보 보여주기

   - [x] 매치: 이동가능한 경로인지 아닌지 확인하기
   - [x] 출력:
         위, 아래를 구분하여 이동할 수 있는 경우는 O, 이동 불가한 경우는 X로 표시한다. (대문자)
         다리의 시작은 `[`, 다리의 끝은 `]`으로 표시
         다리 칸은 `|`(앞뒤 공백 포함) 문자열로 구분

6. 다리 길이만큼 라운드 진행하기

   - [x] 반복: 사용자가 다리끝까지 이동 또는 실패하할 때까지 과정 4~5번을 반복한다.

7. 게임 클리어 여부 만들기

   - [x] 실패: 이동할 수 없는 칸을 이동한 경우 게임 실패한다.
   - [x] 성공: 다리 길이 끝까지 건너면 게임 종료이다.
   - [x] 개수: 첫 시도를 포함하고 마지막 게임 종료할 때까지의 개수세기

8. 게임 실패시

   - [x] 출력과 입력: 게임 진행 여부에 대한 문구 출력하고 사용자에게 값을 입력받기
   - [x] 유효성 검사: 재시도는 R, 종료는 Q이다 .(대문자)
   - [x] 예외: 올바른 값이 아니라면 아닐시, 유효성 검사에 "[ERROR]"로 시작하는 실패할 시 에러 메서지 출려하고 입력을 다시 받는다.
   - [x] 재시작: 처음에 만든 다리(다리 길이, 건널 수 있는지에 대한 여부)는 재사용

9. 게임 종료 또는 성공시

   - [x] 출력1: 최종 문구 출력
   - [x] 출력2: 현재까지 건넌 다리 모두 출력
   - [x] 출력3: 게임 성공 여부 출력
   - [x] 출력4: 시도한 횟수 출력
   - [x] 종료: 콘솔 닫아서 게임 완전히 종료시키기

10. 클래스 요구 상황
    - [x] 입력은 InputView 객체에서 관리
    - [x] 출력은 OutpurView 객체에서 관리
    - [x] 다리 길이를 통해 다리 생성하는 기능은 BridgeMaker 객체에서 관리
    - [x] 칸 이동이나, 게임을 다시작하는 등 다리 건너기 게임을 관리하는 기능은 BridgeGame에서 관리
    - [x] 다리를 건널 수 있는지에 대한 랜덤 값은 BridgeRandomNumberGenerate에서 관리

## 리팩토링

- [x] 하드코딩 피하기
- [x] validation의 재사용성, 유지보수
- [x] readline 분리하기
