# 미션 - 다리 건너기

## 🚀 기능 구현 목록
[x] BridgeGame.js 구현
	[x] move 구현
		[x] 인자로 moving을 받는다
		[x] 해당 부분을 실제 다리와 비교한다
		[x] 비교한 것에 따라 `'O'`, `'X'`, `' '`의 경우와 윗줄 아랫줄로 나누어 저장한다
		[x] 발판이 몇 번째인지 정보를 갱신한다
		[x] 반환 값으로 존재하는 발판을 선택했는지, 발판을 고른 결과를 윗줄 아랫줄로 나누어 반환한다
	[x] 현재 진행상황을 저장하는 필드를 가지고 있다
		[x] 다리의 윗줄, 아랫줄 따로 저장한다
		[x] 정답 다리 정보도 가지고 있다
		[x] 시도 횟수 정보도 가지고 있다
		[x] 현재 몇 번째 발판인지 정보도 가지고 있다
	[x] retry 구현
		[x] 인자로 command를 받는다
		[x] 다시 시도하면 현재 진행상황을 지우고 시도한 회수를 1회 추가한다
		[x] 재시작을 하는지 하지 않는지 boolean 값으로 반환한다

[x] BridgeMaker.js 구현
	[x] makeBridge 구현

[x] InputView.js 구현
	[x] readBridgeSize 구현
	[x] readMoving 구현
	[x] readGameCommand 구현

[x] OutputView.js 구현
	[x] printMap 구현
	[x] printResult 구현
	[x] startGame 구현
	[x] printError 구현

[x] Constants.js 구현
	[x] MESSAGE 구현
	[x] PAD 구현
	[x] COMMAND 구현
	[x] ERROR 구현
	[x] BRIDGE 구현

[x] Validation.js 구현
	[x] isValidBridgeSize 구현
	[x] isValidMoving 구현
	[x] isValidGameCommand 구현

[x] App.js 구현
	[x] readBridgeSize 구현
    [x] bridgeGame 객체를 생성하는 부분
	[x] readMoving 구현 : 이동하는 칸을 사용자에게 받아 오는 부분
	[x] toMove 구현 : 실제로 칸을 이동하는 부분
		[x] isCorrectPad 구현
	[x] readGameCommand 구현 : 게임을 이어서 할지 말지 사용자에게 받아 오는 부분
	[x] printResult 구현 : 결과를 출력하는 부분
	[x] retry 구현
		[x] 다시 시작하면 readMoving 호출
		[x] 아니면 printResult 호출


## 기능 구현 방향

이번 과제는 미리 구조가 짜여있어 해당 구조에 맞게 코딩을 하면 된다.

각 클래스나 객체의 의존성 또한 요구사항에 들어 있어 이 부분을 잘 고려해야겠다. 아마 그동안 다른 지원자 분들이 말씀하신 MVC 패턴을 적용한 것이 아닌가 생각해본다.

* "`BridgeGame` 클래스에서 `InputView`, `OutputView` 를 사용하지 않는다." 는 내용에 따라 App.js에서 호출을 하거나 다른 파일 내에서 호출 해야할 것 같다.

우선 가장 쉬운 InputView를 구현한 뒤에 이미 구현된 BridgeRandomNumberGenerator를 사용하게될 BridgeMaker를 구현해야겠다.

메시지들을 상수화 하기로 결정하고 Constants.js 파일을 만들었다.

InputView와 OutputView간에 의존성을 없애기 위해 유효성 검사는 App에서 진행하기로 하였다.

문제는 BridgeGame을 어떻게 구현하는 것인가 인데 생각하기 어려우니 잘게 쪼개서 생각해보도록 했다.

* 우선 위인지 아래인지 입력을 받는다 -> 이건 inputView에서 진행
* 입력을 받으면 해당 부분을 저장한다 -> move함수에 인자로 'U', 'D'를 받도록 하자
* 저장을 하기 위해선 현재까지 진행한 상황을 저장하는 필드가 있어야 한다 -> 이걸 추가하자

>  그런데 여기서 출력을 또 생각해보면 출력에는
>
> * 윗줄 아랫줄 계산해서 각각 출력해야 된다
> * 그리고 마지막은 틀렸는지 안 틀렸는지도 확인해야한다
> * 그럼 현재 진행 상황을 윗줄, 아랫줄 따로 저장하도록 필드를 만들면 되겠다

* BridgeGame이 다리 건너기 게임을 관리하는 클래스 이므로, 정답 다리 정보도 갖고 있는 것이 좋겠다
* 그럼 constructor를 추가해서 아예 여기서 다리를 생성하도록 하자 -> 그럼 contructor에 인자로 다리의 길이를 받자
* 가는 길이 틀려서 retry하게 되면 현재 기록을 지우고 시도한 회수를 1 추가하는 것으로 하자

이번에는 지난주와는 다르게 주어진 구조가 있어서 이대로 사용하는 것이 좋겠다 판단하였다.(현재 작업을 마친 결과 그렇지 않았고 더 잘게 쪼갤 수 있었는데 틀에 갇혀 그러지 못했음) 그리하여 주어진 BridgeGame, BridgeMaker 등에서 요구하는 만큼만 구현한 뒤에 App에서 합치면서 View를 완성해 나갔다.

그리고 이번에는 지난주와 조금 달랐다고 느꼈던 것이 UI부분을 완전히 분리한 것이었는데 이렇게 되니 메소드나 변수명을 겹쳐 사용하는 경우가 많이 발생해서 곤혹스러웠다. 평가가 끝나고 나서 리팩토링을 해봐야 겠다.

중간에 아래와 같은 이슈가 있어서 답답했지만 TV에서 보던 것을 이렇게 구현해 보니 재미있었다.



## 가장 시간을 많이 쏟은 부분

가장 시간을 많이 쏟은 부분은 입력이 잘못 되었을 경우 `try ... catch` 로 잡아서 다시 실행하는 것이었다 

중간중간 잘 되나 확인하기 위해서 테스트를 돌렸지만 내 코드는 무한 루프에 빠져 버려 테스트가 끝나는데만 5분씩 걸려버렸다. 게다가 출력 값이 콘솔창을 도배해버려 어디가 원인인지도 찾기 어려웠다.

디버깅을 하는 과정은 의외로 간단했는데 재귀로 호출하는 부분을 잠시 주석처리하면 되었었다. 그래서 과제는 완료할 수 있었지만...

테스트 코드에서 끝까지 값이 주어지지 않고 중간까지만 주어진 경우에도 해당 문제가 똑같이 발생하였다. `readline`함수가 입력값이 들어올 때까지 기다리는 것이 아니라 무한 반복하기 때문에 발생한 일이라고 생각하고 유효성 검사시에 공백값이 들어오면 `throw`하지 않게 처리해버렸다.

좀 더 일찍 시작했더라면 이것을 수정할 시간이 있었을텐데 아쉽다.

완전히 원인을 해결하진 못하겠지만 변수를 하나 추가하여 같은 에러가 반복되었을 때(내가 생각하기에는 3회 정도) "3회 연속 아무것도 입력되지 않았습니다"라는 메시지를 출력하는 것이 내가 생각해본 해결 방안이다.

