# 📌 4주차 중점 학습 내용

* 1. 클래스(객체)를 분리하는 연습

* 2. 리팩터링

# 📁 폴더 구조

📦src
 ┣ 📂BridgeGame / 게임 진행 관련 폴더
 ┃ ┣ 📜BridgeGame.js 
 ┃ ┗ 📜MapMaker.js
 ┣ 📂UserInput / 사용자 입력 처리 관련 폴더
 ┃ ┣ 📜InputHandling.js
 ┃ ┗ 📜Validation.js
 ┣ 📂View / 콘솔에 출력되는 뷰 폴더
 ┃ ┣ 📜InputView.js
 ┃ ┗ 📜OutputView.js
 ┣ 📜App.js
 ┣ 📜BridgeMaker.js
 ┣ 📜BridgeRandomNumberGenerator.js
 ┗ 📜Constants.js

# 📝 파일 소개

코드를 조금 더 이해하기 쉽도록 파일 세부 설명을 작성해보았습니다.

이 파일 소개는 초안에 작성했던 기능 목록은 아니고, 코드 작성을 끝낸 후에 부가적인 설명을 위해 만들었습니다.

커밋 순서에 맞는 초안 기능 목록은 아래 "게임 순서에 따른 기능 목록"에 있습니다.

### InputView.js 

  * Console.readLine()을 이용하여 세 번의 입력을 받는다.
  * callback을 인자로 설정하여 다른 파일에서 InputHandling 파일에서 입력에 대한 처리를 한다.

### InputHandling.js

  * 게임 진행 순서대로 세 번의 입력값에 대한 처리를 한다.
  * try문에서 에러가 발생하면 catch문에서 에러를 출력하고 재입력을 요구한다.
  * 입력이 유효하여 try문에서 에러가 발생하지 않으면 입력에 따라 다음 입력으로 넘어간다.
  * BridgeMaker 객체와 BridgeGame 클래스에 입력을 판단하여 처리할 수 있도록 입력값을 인자로 넘겨주거나 메서드를 호출한다.

### Validation.js

  * InputHandling 파일에서 진행하는 3번의 유효성 검사 코드가 들어있다.

### BridgeGame.js

  * BridgeGame 클래스는 InputHandling 에서 다리의 길이를 입력받았을 때 생성된 다리를 인수로 받아 인스턴스가 초기화된다.
  * 처음 인스턴스가 생성될 때 다리 배열의 인덱스, 시도 횟수는 1로 설정되어 있다. 재시작을 하면 BridgeGame의 인스턴스를 재생성하여 초기화한다.
  * 이동, 멈춤, 재시작, 종료에 따라 MapMaker 파일에서 다리 모양을 만들 수 있도록 방향과 시도 횟수를 인자로 넘겨준다.

### MapMaker.js

  * MapMaker 클래스는 위쪽 다리, 아래쪽 다리를 빈 배열로 초기화하여 인스턴스를 생성한다.
  * BridgeGame 에서 호출될 때마다 알맞는 위치에 O, X, 공백을 집어넣는다.
  * OutputView 파일에서 배열을 출력 형식에 맞추어 출력할 수 있도록 위쪽 다리, 아래쪽 다리 배열을 인자로 넘겨준다.
  * 최종 성공, 게임 종료의 경우 BridgeGame에서 넘겨받은 총 시도횟수도 printResult에 인자로 이어 넘겨준다.

### OutputView.js

  * MapMaker에서 넘겨받은 배열들을 ' | '로 합쳐서 출력한다.
  * 최종 게임 결과를 출력하는 경우 넘겨받은 배열에 X가 있으면 '실패'를, 없으면 '성공'을 출력한다.

나머지 파일들은 이름으로 유추 가능한 기능이 들어있기 때문에 설명을 추가하지 않았습니다.

# 👉🏻 게임 순서에 따른 기능 목록

### 1. 다리의 길이를 입력받는다. (readBridgeSize - InputView.js) ✔
  
> **예외 처리** (Validation.js)
    
  * 다리의 길이가 숫자여야 한다. ✅

  * 다리의 길이가 3이상 20이하여야 한다. ✅

**⬇ (InputHandling.js)**

  - [x] 잘못된 값을 입력하면 에러를 발생시키고 다시 다리의 길이를 입력받는다.

### 2. 다리의 길이가 유효하면 다리를 만든다. (makeBridge - BridgeMaker.js)

  - [x] 다리의 길이만큼 다리 랜덤 생성기에서 0 또는 1 값을 저장

  - [x] 다리의 길이가 1이면 "U"로 0이면 "D"로 변경하여 문자열로 이루어진 배열을 반환

### 3. 이동할 칸을 입력받는다. (readMoving - InputView.js) ✔

  > **예외 처리** (Validation.js)

  * 이동할 칸은 문자열 U와 D만 들어올 수 있다.(정규표현식 사용) ✅

  * 이동할 칸은 하나의 문자만 입력할 수 있다.(UD가 들어오는 상황을 방지하기 위해 추가) ✅

  * 소문자 u와 d를 입력한 경우 대문자로 입력하라는 에러를 발생시킨다. ✅

**⬇ (InputHandling.js)**

  - [x] 잘못된 값을 입력하면 에러를 발생시키고 다시 이동할 칸을 입력받는다. 

  - [x] 정답을 맞추면 다시 이동할 칸을 입력받는다.

  - [x] 틀리면 게임 재시작 여부를 묻는다.

  - [x] 다리 길이 끝까지 정답을 맞추면 콘솔을 닫는다.

### 4. 게임 진행 (BridgeGame.js) 

  - [x] 다리 배열과 사용자 입력 방향을 비교하고 움직일지 멈출지 결정한다.

  - [x] 사용자 입력과 다리 배열의 값이 일치하면 앞으로 이동 ✔ (move 메서드)

  - [x] 맞출때마다 다리 배열 인덱스 값을 증가시킨다.

  - [x] 사용자 입력과 다리 배열의 값이 틀리면 멈춤 (stop 메서드)
  
  - [x] 다리 배열의 인덱스와 다리 배열의 길이가 일치하면 끝까지 맞추었다고 판단한다.

  - [x] 게임 재시작 메서드를 호출하면 게임을 초기화시키고 재시작 횟수를 증가시킨다.

### 5. 출력될 다리 만들기 (MapMaker.js)

  - [x] 맞았을 때 U가 입력이면 윗칸에 O표시를 하고 D가 입력이면 아랫칸에 O표시를 한다.

  - [x] 틀렸을 때 U가 입력이면 윗칸에 X표시를 하고 D가 입력이면 아랫칸에 X표시를 한다.

  - [x] 정답을 끝까지 맞추면 최종 게임 결과를 출력하는 함수를 호출한다.

### 6. 게임 결과 출력 (OutputView.js)

  - [x] 위쪽 다리와 아래쪽 다리 배열을 ' | '로 묶어 출력한다.

  - [x] 최종 결과가 성공인지 실패인지 여부를 판단하고 최종 게임 결과 메시지를 출력한다.

### 7. 게임 재시작 여부를 입력받는다. (readGameCommand - InputView.js) ✔

**⬇ (InputHandling.js)**

  > **예외 처리** (Validation.js)

  * 입력이 R과 Q만 들어올 수 있다.(정규표현식 사용) ✅

  * 이동할 칸은 하나의 문자만 입력할 수 있다.(RQ가 들어오는 상황을 방지하기 위해 추가) ✅

  * 소문자 r와 q를 입력한 경우 대문자로 입력하라는 에러를 발생시킨다. ✅

  - [x] 잘못된 값을 입력하면 에러를 발생시키고 다시 재시작 여부를 입력받는다.

  - [x] 재시도 R을 입력하면 게임을 초기화하고 이동할 칸을 입력받는 순서로 돌아간다.

  - [x] 종료 Q를 입력하면 게임 결과를 출력하고 게임을 종료한다. 

# 💻 프로그래밍 요구사항 

- [x] indent(인덴트, 들여쓰기) depth를 3이 넘지 않도록 구현한다. 2까지만 허용한다.

- [x] 함수(또는 메서드)가 한 가지 일만 하도록 최대한 작게 만들어라.

- [x] Jest를 이용하여 본인이 정리한 기능 목록이 정상 동작함을 테스트 코드로 확인한다.

- [x] else를 지양한다.
  
- [x] 도메인 로직에 단위 테스트를 구현해야 한다. 단, UI(Console.readLine, Console.print) 로직에 대한 단위 테스트는 제외한다.
  
- [x] 핵심 로직을 구현하는 코드와 UI를 담당하는 로직을 구분한다.

# ➕ 추가된 요구 사항

- [x] 함수(또는 메서드)의 길이가 10라인을 넘어가지 않도록 구현한다. 함수(또는 메서드)가 한 가지 일만 잘하도록 구현한다.

- [x] 메서드의 파라미터 개수는 최대 3개까지만 허용한다.

- [x] `InputView` 에서만 `MissionUtils`의 `Console.readLine()` 을 이용해 사용자의 입력을 받을 수 있다.

- [x] `BridgeGame` 클래스에서 `InputView`, `OutputView` 를 사용하지 않는다.